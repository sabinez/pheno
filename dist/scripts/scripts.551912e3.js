"use strict";angular.module("phenoApp",["ngAnimate","ngCookies","ngRoute","ngSanitize","ngTouch"]),window.animatePeas=function(){var a=""+($(".peas-img-hg").width()-$(".pea-a").width())+"px",b=""+($(".peas-img-hg").height()-$(".pea-a").height())+"px";$(".pea").each(function(c,d){var e=$(d),f=e.css("left"),g=e.css("top"),h=Math.floor(3*Math.random()),i=Math.floor(Math.random()*parseInt(b)),j=Math.floor(Math.random()*parseInt(a));"0px"===f?0===h?(e.css("top","0px"),e.css("left",""+j+"px")):1===h?(e.css("left",a),e.css("top",""+i+"px")):(e.css("top",b),e.css("left",""+j+"px")):f===a?0===h?(e.css("top",b),e.css("left",""+j+"px")):1===h?(e.css("left","0px"),e.css("top",""+i+"px")):(e.css("top","0px"),e.css("left",""+j+"px")):"0px"===g?0===h?(e.css("left",a),e.css("top",""+i+"px")):1===h?(e.css("top",b),e.css("left",""+j+"px")):(e.css("left","0px"),e.css("top",""+i+"px")):g===b&&(0===h?(e.css("left","0px"),e.css("top",""+i+"px")):1===h?(e.css("top","0px"),e.css("left",""+j+"px")):(e.css("left",a),e.css("top",""+i+"px")))})},angular.module("phenoApp").controller("AboutCtrl",function(){}),function(){angular.module("phenoApp").service("plantData",["$http",function(a){var b={};return b.requestPlantData=function(b){a.get("/plants.json").success(function(a){b(a)})},b}])}(),function(){angular.module("phenoApp").controller("ApplicationCtrl",["plantData","$scope","initScrolling","initScrollingMobile","$timeout","media",function(a,b,c,d,e,f){var g=function(){return document.getElementById("calendar-month-section").offsetWidth/12},h=function(a,b,c){return 1===b?(a[1]-a[0])*c:2===b?(a[3]-a[2])*c:void 0},i=function(a,b,c){return 1===b?(a[0]-1)*c:2===b?(a[2]-a[1])*c:void 0},j=function(a){for(var c=0;c<b.PLANTS.length;c++)for(var d=b.PLANTS[c],e=["sowing","planting","harvesting"],f=0;f<e.length;f++){var g=e[f]+"Width",j=e[f]+"Margin",k=e[f]+"WidthSecond",l=e[f]+"MarginSecond",m=e[f].toUpperCase(),n=d.TIMES[m];void 0!==n&&(b.PLANTS[c][g]=h(n,1,a),b.PLANTS[c][j]=i(n,1,a),n.length>2?(b.PLANTS[c][k]=h(n,2,a),b.PLANTS[c][l]=i(n,2,a)):(b.PLANTS[c][k]=0,b.PLANTS[c][l]=0))}};b.hideLines=!1,b.showMenuAll=!1,b.showMenu=!1,b.hideMenu=!0,b.showBeetrootText=!1,b.anchorStatuses={};var k={};k.removeLinesAndShowMenu=function(){b.$apply(function(){0==b.hideLines?(b.hideLines=!0,b.showMenuAll=!0):(b.hideLines=!1,b.showMenuAll=!1)})},k.updateAnchorStatus=function(a){b.$apply(function(){b.anchorStatuses[a]?b.anchorStatuses[a]=!1:b.anchorStatuses[a]=!0})},b.menuButton=function(){0==b.showMenu?(b.showMenu=!0,b.hideMenu=!1):(b.showMenu=!1,b.hideMenu=!0)},a.requestPlantData(function(a){b.PLANTS=a.PLANTS,j(g()),e(function(){f.isMobile()===!0?d(k,b.PLANTS):c(k,b.PLANTS),setInterval(animatePeas,20)})}),b.media=f}])}(),function(){angular.module("phenoApp").service("initScrolling",function(){var a=[],b=function(b,c){var d=$(window).height(),e=d/15,f=3*e,g=4*e,h=5*e,i=6*e,j=6.5*e,k=7*e,l=11*e,m=$(window).width()/2-5*e,n=new ScrollMagic.Controller({container:"#viewport"}),o=function(a,b){var d,e,f=[];"all"==a?(d=0,e=c.length):(d=a,e=a+1);for(var g=d;e>g;g++)f.push(TweenMax.to(".time-bar-sowing-"+c[g].URL,.3,{width:b?0:c[g].sowingWidth.toString()+"px",overwrite:!1}),TweenMax.to(".time-bar-harvesting-"+c[g].URL,.3,{width:b?0:c[g].harvestingWidth.toString()+"px",overwrite:!1})),void 0!==c[g].sowingWidthSecond&&f.push(TweenMax.to(".time-bar-sowing-2nd-"+c[g].URL,.3,{width:b?0:c[g].sowingWidthSecond.toString()+"px","margin-left":b?c[g].sowingMarginSecond+c[g].sowingWidth+"px":c[g].sowingMarginSecond.toString()+"px",overwrite:!1})),void 0!==c[g].plantingWidth&&f.push(TweenMax.to(".time-bar-planting-"+c[g].URL,.3,{width:b?0:c[g].plantingWidth.toString()+"px",overwrite:!1})),void 0!==c[g].harvestingWidthSecond&&f.push(TweenMax.to(".time-bar-harvesting-2nd-"+c[g].URL,.3,{width:b?0:c[g].harvestingWidthSecond.toString()+"px","margin-left":b?c[g].harvestingMarginSecond+c[g].harvestingWidth+"px":c[g].harvestingMarginSecond.toString()+"px",overwrite:!1}));return f},p=new TimelineMax;p.add([TweenMax.to(".plant-names-wrapper",1,{left:"-100vh"}),TweenMax.to(".plant-separator-line",1,{width:"0"}),TweenMax.to(".month-separators",1,{height:"0"})],.3),a.push(new ScrollMagic.Scene({triggerElement:".screen-calendar",duration:1.5*d}).triggerHook(0).setTween(p).on("end",function(){b.removeLinesAndShowMenu()})),a.push(new ScrollMagic.Scene({triggerElement:".screen-calendar",duration:.55*d}).triggerHook(0).setPin(".screen-calendar",{pushFollowers:!0})),a.push(new ScrollMagic.Scene({triggerElement:".screen-calendar"}).triggerHook(0).setTween(o("all"))),a.push(new ScrollMagic.Scene({triggerElement:".screen-calendar"}).triggerHook(0).offset(.5*d).setTween(o("all",!0))),a.push(new ScrollMagic.Scene({triggerElement:".screen-calendar",duration:$("#viewport")[0].scrollHeight}).triggerHook(0).offset(.55*d).setPin("#target-side-bar-lines",{pushFollowers:!1})),a.push(new ScrollMagic.Scene({triggerElement:".screen-calendar",duration:$("#viewport")[0].scrollHeight}).triggerHook(0).offset(.55*d).setPin(".month-separators",{pushFollowers:!1})),a.push(new ScrollMagic.Scene({triggerElement:".screen-calendar",duration:$("#viewport")[0].scrollHeight}).triggerHook(0).offset(.55*d).setPin(".calendar-months",{pushFollowers:!1})),a.push(new ScrollMagic.Scene({triggerElement:".screen-calendar",duration:$("#viewport")[0].scrollHeight}).triggerHook(0).offset(.55*d).setPin(".menu-wrapper",{pushFollowers:!1}));var q=new TimelineMax;q.add([TweenMax.to(".vegetable-heading-spinach",.4,{top:"5vh"}),TweenMax.to(".spinach-img",.4,{top:i.toString()}),TweenMax.to(".spinach-text-position",.4,{top:k.toString()})],0),q.add([TweenMax.to(".vegetable-heading-spinach",.4,{top:"-50vh"}),TweenMax.to(".spinach-img",.4,{top:"-50vh"}),TweenMax.to(".spinach-text-position",.4,{top:"-100vh"})],.6),a.push(new ScrollMagic.Scene({triggerElement:".screen-spinach",duration:1.5*d}).triggerHook(0).setPin(".screen-spinach",{pushFollowers:!1}).setTween(q).setClassToggle("#menu-spinach","active").on("end",function(){b.updateAnchorStatus("spinach")})),a.push(new ScrollMagic.Scene({triggerElement:".screen-spinach"}).offset(.9*d).setTween(o(0))),a.push(new ScrollMagic.Scene({triggerElement:".screen-spinach"}).offset(1.4*d).setTween(o(0,!0)));var r=new TimelineMax;r.add([TweenMax.to(".vegetable-heading-chard",.4,{top:"5vh"}),TweenMax.to(".chard-img",.4,{top:i.toString()}),TweenMax.to(".chard-text-position",.4,{top:i.toString()})],0),r.add([TweenMax.to(".vegetable-heading-chard",.4,{top:"-50vh"}),TweenMax.to(".chard-img",.4,{top:"-50vh"}),TweenMax.to(".chard-text-position",.4,{top:"-100vh"})],.6),a.push(new ScrollMagic.Scene({triggerElement:".screen-chard",duration:1.5*d}).triggerHook(0).setPin(".screen-chard",{pushFollowers:!1}).setTween(r).setClassToggle("#menu-chard","active").on("end",function(){b.updateAnchorStatus("chard")})),a.push(new ScrollMagic.Scene({triggerElement:".screen-chard"}).offset(.9*d).setTween(o(1))),a.push(new ScrollMagic.Scene({triggerElement:".screen-chard"}).offset(1.4*d).setTween(o(1,!0)));var s=new TimelineMax;s.add([TweenMax.to(".vegetable-heading-brussel-sprouts",.4,{top:"5vh"}),TweenMax.to(".brussel-sprouts-img",.4,{top:f.toString()}),TweenMax.to(".brussel-sprouts-text-position",.4,{top:k.toString()})],0),s.add(TweenMax.to("#target-brussel-sprouts-cutout",.4,{rotation:360,ease:Linear.easeNone}),.4),s.add([TweenMax.to(".vegetable-heading-brussel-sprouts",.4,{top:"-50vh"}),TweenMax.to(".brussel-sprouts-img",.4,{top:"-50vh"}),TweenMax.to(".brussel-sprouts-text-position",.4,{top:"-50vh"})],.8),a.push(new ScrollMagic.Scene({triggerElement:".screen-brussel-sprouts",duration:1.5*d}).triggerHook(0).setPin(".screen-brussel-sprouts",{pushFollowers:!1}).setTween(s).setClassToggle("#menu-brussel-sprouts","active").on("end",function(){b.updateAnchorStatus("brussel-sprouts")})),a.push(new ScrollMagic.Scene({triggerElement:".screen-brussel-sprouts"}).offset(.9*d).setTween(o(2))),a.push(new ScrollMagic.Scene({triggerElement:".screen-brussel-sprouts"}).offset(1.5*d).setTween(o(2,!0)));var t=new TimelineMax;t.add([TweenMax.to(".vegetable-heading-pepper",.4,{top:"5vh"}),TweenMax.to(".pepper-img-tweener",.4,{top:i.toString()}),TweenMax.to(".pepper-text-position",.4,{top:i.toString()})],0),t.add([TweenMax.to(".vegetable-heading-pepper",.4,{top:"-50vh"}),TweenMax.to(".pepper-text-position",.4,{top:"-100vh"})],.6),a.push(new ScrollMagic.Scene({triggerElement:".screen-pepper",duration:1.5*d}).triggerHook(0).setPin(".screen-pepper",{pushFollowers:!1}).setTween(t).setClassToggle("#menu-pepper","active").on("end",function(){b.updateAnchorStatus("pepper")})),a.push(new ScrollMagic.Scene({triggerElement:".screen-pepper"}).offset(.9*d).setTween(o(3))),a.push(new ScrollMagic.Scene({triggerElement:".screen-pepper"}).offset(1.5*d).setTween(o(3,!0))),a.push(new ScrollMagic.Scene({triggerElement:".screen-beetroot",duration:1.5*d}).triggerHook(1).offset(1*d).setPin("#pepper-img-pin",{pushFollowers:!1}));var u=new TimelineMax;u.add([TweenMax.to(".vegetable-heading-beetroot",.4,{top:"5vh"}),TweenMax.to(".beetroot-img",.4,{top:i.toString()}),TweenMax.to(".beetroot-text-position",.4,{top:k.toString()})],0),u.add(TweenMax.to([".beetroot-img",".pepper-img-tweener"],.4,{left:m.toString()}),.4),u.add([TweenMax.to(".vegetable-heading-beetroot",.4,{top:"-50vh"}),TweenMax.to(".beetroot-img",.4,{top:"-50vh"}),TweenMax.to(".pepper-img-tweener",.4,{top:"-50vh"}),TweenMax.to(".beetroot-text-position",.4,{top:"-100vh"})],1),a.push(new ScrollMagic.Scene({triggerElement:".screen-beetroot",duration:1.5*d}).triggerHook(0).setPin(".screen-beetroot",{pushFollowers:!1}).setTween(u).setClassToggle("#menu-beetroot","active").on("end",function(){b.updateAnchorStatus("beetroot")})),a.push(new ScrollMagic.Scene({triggerElement:".screen-beetroot"}).offset(.9*d).setTween(o(4))),a.push(new ScrollMagic.Scene({triggerElement:".screen-beetroot"}).offset(1.6*d).setTween(o(4,!0)));var v=new TimelineMax;v.add([TweenMax.to(".vegetable-heading-peas",.4,{top:"5vh"}),TweenMax.to(".peas-img",.4,{top:h.toString()}),TweenMax.to(".peas-text-position",.4,{top:k.toString()})],0),v.add([TweenMax.to(".vegetable-heading-peas",.4,{top:"-50vh"}),TweenMax.to(".peas-img",.4,{top:"-50vh"}),TweenMax.to(".peas-text-position",.4,{top:"-100vh"})],.6),a.push(new ScrollMagic.Scene({triggerElement:".screen-peas",duration:1.5*d}).triggerHook(0).setPin(".screen-peas",{pushFollowers:!1}).setTween(v).setClassToggle("#menu-peas","active").on("end",function(){b.updateAnchorStatus("peas")})),a.push(new ScrollMagic.Scene({triggerElement:".screen-peas"}).offset(.9*d).setTween(o(5))),a.push(new ScrollMagic.Scene({triggerElement:".screen-peas"}).offset(1.5*d).setTween(o(5,!0)));var w=new TimelineMax;w.add([TweenMax.to(".vegetable-heading-onion",.4,{top:"5vh"}),TweenMax.to(".onion-img",.4,{top:g.toString()}),TweenMax.to(".onion-text-position",.4,{top:k.toString()})],0),w.add([TweenMax.to(".vegetable-heading-onion",.4,{top:"-50vh"}),TweenMax.to(".onion-img",.4,{top:"-50vh"}),TweenMax.to(".onion-text-position",.4,{top:"-100vh"})],.6),a.push(new ScrollMagic.Scene({triggerElement:".screen-onion",duration:1.5*d}).triggerHook(0).setPin(".screen-onion",{pushFollowers:!1}).setTween(w).setClassToggle("#menu-onion","active").on("end",function(){b.updateAnchorStatus("onion")})),a.push(new ScrollMagic.Scene({triggerElement:".screen-onion"}).offset(.9*d).setTween(o(6))),a.push(new ScrollMagic.Scene({triggerElement:".screen-onion"}).offset(1.5*d).setTween(o(6,!0)));var x=new TimelineMax;x.add([TweenMax.to(".vegetable-heading-carrot",.4,{top:"5vh"}),TweenMax.to(".carrot-img",.4,{top:h.toString()}),TweenMax.to(".carrot-text-position",.4,{top:i.toString()}),TweenMax.to(".carrot-img",.4,{rotation:180,ease:Linear.easeNone})],0),x.add([TweenMax.to(".vegetable-heading-carrot",.4,{top:"-50vh"}),TweenMax.to(".carrot-img",.4,{top:"-50vh"}),TweenMax.to(".carrot-text-position",.4,{top:"-100vh"})],.6),a.push(new ScrollMagic.Scene({triggerElement:".screen-carrot",duration:1.5*d}).triggerHook(0).setPin(".screen-carrot",{pushFollowers:!1}).setTween(x).setClassToggle("#menu-carrot","active").on("end",function(){b.updateAnchorStatus("carrot")})),a.push(new ScrollMagic.Scene({triggerElement:".screen-carrot"}).offset(.9*d).setTween(o(7))),a.push(new ScrollMagic.Scene({triggerElement:".screen-carrot"}).offset(1.5*d).setTween(o(7,!0)));var y=new TimelineMax;y.add([TweenMax.to(".vegetable-heading-tomato",.35,{top:"5vh"}),TweenMax.to(".tomato-hg",.35,{top:i.toString()}),TweenMax.to(".tomato-img",.35,{top:j.toString()}),TweenMax.to(".tomato-text-position",.35,{top:k.toString()})],0),y.add(TweenMax.to(".tomato-img",.05,{top:i.toString()}),.35),y.add([TweenMax.to(".vegetable-heading-tomato",.4,{top:"-50vh"}),TweenMax.to(".tomato-hg",.4,{top:"-50vh"}),TweenMax.to(".tomato-img",.4,{top:"-50vh"}),TweenMax.to(".tomato-text-position",.4,{top:"-100vh"})],.6),a.push(new ScrollMagic.Scene({triggerElement:".screen-tomato",duration:1.5*d}).triggerHook(0).setPin(".screen-tomato",{pushFollowers:!1}).setTween(y).setClassToggle("#menu-tomato","active").on("end",function(){b.updateAnchorStatus("tomato")})),a.push(new ScrollMagic.Scene({triggerElement:".screen-tomato"}).offset(.9*d).setTween(o(8))),a.push(new ScrollMagic.Scene({triggerElement:".screen-tomato"}).offset(1.5*d).setTween(o(8,!0)));var z=new TimelineMax;z.add([TweenMax.to(".vegetable-heading-sweet-potato",.4,{top:"5vh"}),TweenMax.to(".sweet-potato-img",.4,{top:f.toString()}),TweenMax.to(".sweet-potato-text-position",.4,{top:l.toString()})],0),z.add([TweenMax.to(".vegetable-heading-sweet-potato",.4,{top:"-50vh"}),TweenMax.to(".sweet-potato-img",.4,{top:"-50vh"}),TweenMax.to(".sweet-potato-text-position",.4,{top:"-100vh"})],.6),a.push(new ScrollMagic.Scene({triggerElement:".screen-sweet-potato",duration:1.5*d}).triggerHook(0).setPin(".screen-sweet-potato",{pushFollowers:!1}).setTween(z).setClassToggle("#menu-sweet-potato","active").on("end",function(){b.updateAnchorStatus("sweet-potato")})),a.push(new ScrollMagic.Scene({triggerElement:".screen-sweet-potato"}).offset(.9*d).setTween(o(9))),a.push(new ScrollMagic.Scene({triggerElement:".screen-sweet-potato"}).offset(1.5*d).setTween(o(9,!0))),a.forEach(function(a){a.addTo(n)}),n.scrollTo(function(a){var b=$("#viewport");TweenMax.to(b,.5,{scrollTo:{y:a}})}),$(document).on("click","a[href^='#']",function(a){var b=$(this).attr("href");$(b).length>0&&(a.preventDefault(),n.scrollTo(b),window.history&&window.history.pushState&&history.pushState("",document.title,b))})};return $(window).on("resize",function(){for(var c=0;c<a.length;c++)a[c].destroy(!0);a=[],b()}),b})}(),function(){angular.module("phenoApp").service("initScrollingMobile",function(){var a=[],b=function(b,c){var d=new ScrollMagic.Controller({container:"#viewport"}),e=TweenMax.to(".brussel-sprouts-cutout",1,{rotation:360,ease:Linear.easeNone});a.push(new ScrollMagic.Scene({triggerElement:".brussel-sprouts-img",duration:150}).triggerHook(0).setPin(".brussel-sprouts-img",{pushFollowers:!0}).setTween(e));var f=TweenMax.to(".tomato-cutout",1,{top:0});a.push(new ScrollMagic.Scene({triggerElement:".tomato-img",duration:30}).triggerHook(0).setPin(".tomato-img",{pushFollowers:!0}).setTween(f)),a.forEach(function(a){a.addTo(d)}),d.scrollTo(function(a){var b=$("#viewport");TweenMax.to(b,.5,{scrollTo:{y:a}})}),$(document).on("click","a[href^='#']",function(a){var b=$(this).attr("href");$(b).length>0&&(a.preventDefault(),d.scrollTo(b),window.history&&window.history.pushState&&history.pushState("",document.title,b))})};return $(window).on("resize",function(){for(var c=0;c<a.length;c++)a[c].destroy(!0);a=[],b()}),b})}(),angular.module("phenoApp").directive("vegetableTimeBars",function(){return{restrict:"E",replace:!0,scope:{plant:"="},template:'        <li class="target-tween-tomato">          <div class="calendar-time-bars">            <div style="display:flex;">              <div class="calendar-time-bar sowing time-bar-sowing-{{plant.URL}}" style="width:0;margin-left:{{plant.sowingMargin}}px;"> sow</div>              <div class="calendar-time-bar sowing time-bar-sowing-2nd-{{plant.URL}}" ng-if="plant.TIMES.SOWING[2]" style="width:0;margin-left:{{plant.sowingMarginSecond + plant.sowingWidth}}px;"> sow</div>            </div>            <div class="calendar-time-bar planting time-bar-planting-{{plant.URL}}" ng-if="plant.TIMES.PLANTING" style="width:0;margin-left:{{plant.plantingMargin}}px;"> plant</div>            <div style="display:flex;">              <div class="calendar-time-bar harvesting time-bar-harvesting-{{plant.URL}}" style="width:0;margin-left:{{plant.harvestingMargin}}px;"> harvest</div>              <div class="calendar-time-bar harvesting time-bar-harvesting-2nd-{{plant.URL}}" ng-if="plant.TIMES.HARVESTING[2]" style="width:0;margin-left:{{plant.harvestingMarginSecond + plant.harvestingWidth}}px;"> harvest</div>            </div>          </div>        </li>'}}),function(){angular.module("phenoApp").service("media",["$window","$timeout",function(a,b){var c=a.innerWidth;a.addEventListener("resize",function(){b(function(){c=a.innerWidth})});var d={isMobile:function(){return 640>c?!0:!1}};return d}])}(),angular.module("phenoApp").directive("vegetableTimeTable",function(){return{restrict:"E",replace:!0,scope:{plant:"="},link:function(a,b,c){var d=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];a.monthNameFromNumber=function(a,b){if(a-=1,void 0!==a){if(a%1!==0)var c="Mid "+d[Math.floor(a)];else if(b){a-=1;var c=d[a]}else var c=d[a];return c}}},template:'        <table>          <tr>            <td class="time-table-activity">sow</td>            <td>{{monthNameFromNumber(plant.TIMES.SOWING[0])}} - {{monthNameFromNumber(plant.TIMES.SOWING[1], true)}}</td>          </tr>          <tr ng-if="plant.TIMES.PLANTING">            <td class="time-table-activity">planting</td>            <td>{{monthNameFromNumber(plant.TIMES.PLANTING[0])}} - {{monthNameFromNumber(plant.TIMES.PLANTING[1], true)}}</td>          </tr>          <tr>            <td class="time-table-activity">harvest</td>            <td>{{monthNameFromNumber(plant.TIMES.HARVESTING[0])}} - {{monthNameFromNumber(plant.TIMES.HARVESTING[1], true)}}</td>          </tr>          <tr ng-if="plant.TIMES.SOWING[2]">            <td class="time-table-activity">2nd sow</td>            <td>{{monthNameFromNumber(plant.TIMES.SOWING[2])}} - {{monthNameFromNumber(plant.TIMES.SOWING[3], true)}}</td>          </tr>          <tr ng-if="plant.TIMES.HARVESTING[2]">            <td class="time-table-activity">2nd harvest</td>            <td>{{monthNameFromNumber(plant.TIMES.HARVESTING[2])}} - {{monthNameFromNumber(plant.TIMES.HARVESTING[3], true)}}</td>          </tr>        </table>'}}),angular.module("phenoApp").run(["$templateCache",function(a){a.put("views/about.html","<p>This is the about view.</p>")}]);